<!DOCTYPE html>
        <html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="height:400px"></div>
    <!-- ECharts单文件引入 -->
    <script src="../static/echarts.js"></script>
    <script src="../static/jquery.js"></script>
    <script type="text/javascript">
    //AJAX请求
    function getBarInfo(){
			var currentAjax =$.ajax({
               type: "POST",
		       url:"mysqlsel",//图表数据来源
		       data:{},
		       success: function(data){
                   var  strs  =  data.split(',');
                   loadcharts(strs);
               },
                error: function(data) {
					if(currentAjax){currentAjax.abort();}else{alert("加载失败");}
                }
            });
        }
        getBarInfo();
        setInterval(getBarInfo,10000);
        function loadcharts(data){
        // 路径配置
		var fileLocation ='../static';//存放文件路径
        require.config({
            paths: {
                echarts: fileLocation
            }
        });
        // 使用
        require(
            [
                'echarts',
                'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
            ],
            function (ec) {
                // 基于准备好的dom，初始化echarts图表
                var myChart = ec.init(document.getElementById('main'));
    var zrColor = require('zrender/tool/color');
    var colorList = [
  '#ff7f50','#87cefa','#da70d6','#32cd32','#6495ed',
  '#ff69b4','#ba55d3','#cd5c5c','#ffa500','#40e0d0'
    ];
    var itemStyle = {
    normal: {
        color: function(params) {
          if (params.dataIndex < 0) {
            // for legend
            return zrColor.lift(
              colorList[colorList.length - 1], params.seriesIndex * 0.1
            );
          }
          else {
            // for bar
            return zrColor.lift(
              colorList[params.dataIndex], params.seriesIndex * 0.1
            );
          }
        }
    }
};
   var option = {
       title: {
        text: '入库量详情统计'
    },
    tooltip: {
        trigger: 'axis',
        backgroundColor: 'rgba(255,255,255,0.7)',
        axisPointer: {
            type: 'shadow'
        },
        formatter: function(params) {
            // for text color
            var color = colorList[params[0].dataIndex];
            var res = '<div style="color:' + color + '">';
            res += '<strong>' + params[0].name + '入库量</strong>'
            for (var i = 0, l = params.length; i < l; i++) {
                res += '<br/>' + params[i].seriesName + ' : ' + params[i].value
            }
            res += '</div>';
            return res;
        }
    },
    legend: {
        x: 'right',
        data:['当天','上周','上月','当年']
    },
    toolbox: {
        show: true,
        orient: 'vertical',
        y: 'center',
        feature: {
            mark: {show: true},
            dataView: {show: true, readOnly: false},
            restore: {show: true},
            saveAsImage: {show: true}
        }
    },
    calculable: true,
    grid: {
        y: 80,
        y2: 40,
        x2: 40
    },
    xAxis: [
        {
            type: 'category',
            data: ['新闻', '论坛', '搜索', '微博', '总量']
        }
    ],
    yAxis: [
        {
            type: 'value'
        }
    ],
    series: [
        {
            name: '当天',
            type: 'bar',
            itemStyle: itemStyle,
            data: [4804.7,1444.3,1332.1,908,871.8]
        },
        {
            name: '上周',
            type: 'bar',
            itemStyle: itemStyle,
            data: [5506.3,1674.7,1405,1023.2,969]
        },
        {
            name: '上月',
            type: 'bar',
            itemStyle: itemStyle,
            data: [6040.9,1823.4,1484.3,1116.1,1063.7]
        },
        {
            name: '当年',
            type: 'bar',
            itemStyle: itemStyle,
            data: [6311.9,1902,1745.1,1215.1,1118.3]
        }
    ]
   };

                // 为echarts对象加载数据 
                myChart.setOption(option); 
            }
        )};
    </script>
</body>
</html>
